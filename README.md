## RESTful route

| NAME            | PATH               | VERB   | PURPOSE                            |
|-----------------|--------------------|--------|------------------------------------|
| Index           | /finance/index     | GET    | Display user's portfolio           |
| Register Form   | /finance/register  | GET    | Form to register new user          |
| Register Action | /finance/register  | POST   | Action to register new user        |
| Login Form      | /finance/login     | GET    | Form to login user                 |
| Login Action    | /finance/login     | POST   | Action to login user               |
| Quote Form      | /finance/quote     | GET    | Details for one specific comment   |
| Quote Action    | /finance/quote     | GET    | Details for one specific comment   |
| Buy Form        | /finance/buy       | GET    | Form to edit specific comment      |
| Buy Action      | /finance/buy       | POST   | Form to edit specific comment      |
| Sell Form       | /finance/sell      | GET    | Updates specific comment on server |
| Sell Action     | /finance/sell      | POST   | Updates specific comment on server |
| History         | /finance/history   | GET    | Deletes specific item on server    |

## Helper Functions

- **lookup.js**: Simplemente se encarga de obtener la información financiera de algún símbolo, la cual obtiene de IEX.

- **usd.jd**: Formatea un float como USD

- **requireLogin.js**: Función para usar como middleware para requerir login en todas las rutas que lo requiran(las "protege")

- **parseDateTime**: Función para convertir objeto DATE de DB en string bonito, para no necesitar toda esa lógica en el template

- **authenticate**: Función que chequea si el password es correcto (login route)

### CHANGES 02-05-2022
- Sessions, register user, login, logout ✔️ Done! But the user is logged out when rebooting the server
- Completed all the missing routes and fixed all the templates
- Fixed: Need to send context to res.render() calls even if the user is not logged in. The templates need the "user" variable with "undefined" value ✔️
- 

### CHANGES 03-05-2022
- Created **authenticate** helper function (for login and change password routes)
    - Side note: Prisma Client cant't have attached methods like other ORMs. Could wor around this by creating a Class that uses the prisma client, then putting the method in there
- **BUG FIX**: The symbols store themselves in lower case or uppercase, should always be in uppercase
- **Security**: CSRF Protection - Implemented with 'csurf' and 'cookie-parser'

- Need some indication of which user is currently logged in 
- Need flash messages with preety Bootstrap alerts
- Login user after registration

### TODO
- APOLOGY - I don't like the fact that, when there's some invalid input generated by the user, the POST route just directly renders the apology view... so if the user reloads the page, the form submits again. Would be better to stay in the same page and flash a message instead.
- SEED DB - Need to create a file to seed the DB with 3 users, each with at least 8 stocks, and a history that spans at least a few weeks... So I can try some interesting features with the history later
- Clean up structure of the files inside /Finance-Node folder... put stuff in /src folder ??
-

### Wishlist
- Buy / Sell stocks directly in the index page
- Require a password with at least one uppercase letter, one lowercase letter, one unmber, one special character, and between 8 and 20 characters long
- "Sell Out" button to sell all shares from one stock
- If you click one stock, go to a page with more detailed information
- Filter in the history page (Client side JS?)
- Change the design of the page so it doesn't look so similar to the CS50 version, although I should put some notice that the web app is inspired by the CS50 one
-
